---
layout:     post
title:      ç‰¹å¾å·¥ç¨‹
subtitle:   å¤©æ± æ¯”èµ›äºŒæ‰‹è½¦ä»·æ ¼é¢„æµ‹
date:       2020-03-26
author:     Young
header-img: img/bg-post/1*EbpKczfURCvAF6uUp_Hhew.jpeg
catalog: true
tags:
    - tianchi
---

### å¸¸è§çš„ç‰¹å¾å·¥ç¨‹åŒ…æ‹¬
> 1. å¼‚å¸¸å¤„ç†ï¼š
>    - é€šè¿‡ç®±çº¿å›¾ï¼ˆæˆ– 3-Sigmaï¼‰åˆ†æåˆ é™¤å¼‚å¸¸å€¼ï¼›
>    - BOX-COX è½¬æ¢ï¼ˆå¤„ç†æœ‰ååˆ†å¸ƒï¼‰ï¼›
>    - é•¿å°¾æˆªæ–­ï¼›
> 2. ç‰¹å¾å½’ä¸€åŒ–/æ ‡å‡†åŒ–ï¼š
>    - æ ‡å‡†åŒ–ï¼ˆè½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼‰ï¼›
>    - å½’ä¸€åŒ–ï¼ˆæŠ“æ¢åˆ° [0,1] åŒºé—´ï¼‰ï¼›
>    - é’ˆå¯¹å¹‚å¾‹åˆ†å¸ƒï¼Œå¯ä»¥é‡‡ç”¨å…¬å¼ï¼š ğ‘™ğ‘œğ‘”(1+ğ‘¥1+ğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘›)log(1+x1+median)
> 3. æ•°æ®åˆ†æ¡¶ï¼š
>    - ç­‰é¢‘åˆ†æ¡¶ï¼›
>    - ç­‰è·åˆ†æ¡¶ï¼›
>    - Best-KS åˆ†æ¡¶ï¼ˆç±»ä¼¼åˆ©ç”¨åŸºå°¼æŒ‡æ•°è¿›è¡ŒäºŒåˆ†ç±»ï¼‰ï¼›
>    - å¡æ–¹åˆ†æ¡¶ï¼›
> 4. ç¼ºå¤±å€¼å¤„ç†ï¼š
>    - ä¸å¤„ç†ï¼ˆé’ˆå¯¹ç±»ä¼¼ XGBoost ç­‰æ ‘æ¨¡å‹ï¼‰ï¼›
>    - åˆ é™¤ï¼ˆç¼ºå¤±æ•°æ®å¤ªå¤šï¼‰ï¼›
>    - æ’å€¼è¡¥å…¨ï¼ŒåŒ…æ‹¬å‡å€¼/ä¸­ä½æ•°/ä¼—æ•°/å»ºæ¨¡é¢„æµ‹/å¤šé‡æ’è¡¥/å‹ç¼©æ„ŸçŸ¥è¡¥å…¨/çŸ©é˜µè¡¥å…¨ç­‰ï¼›
>    - åˆ†ç®±ï¼Œç¼ºå¤±å€¼ä¸€ä¸ªç®±ï¼›
> 5. ç‰¹å¾æ„é€ ï¼š
>    - æ„é€ ç»Ÿè®¡é‡ç‰¹å¾ï¼ŒæŠ¥å‘Šè®¡æ•°ã€æ±‚å’Œã€æ¯”ä¾‹ã€æ ‡å‡†å·®ç­‰ï¼›
>    - æ—¶é—´ç‰¹å¾ï¼ŒåŒ…æ‹¬ç›¸å¯¹æ—¶é—´å’Œç»å¯¹æ—¶é—´ï¼ŒèŠ‚å‡æ—¥ï¼ŒåŒä¼‘æ—¥ç­‰ï¼›
>    - åœ°ç†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ†ç®±ï¼Œåˆ†å¸ƒç¼–ç ç­‰æ–¹æ³•ï¼›
>    - éçº¿æ€§å˜æ¢ï¼ŒåŒ…æ‹¬ log/ å¹³æ–¹/ æ ¹å·ç­‰ï¼›
>    - ç‰¹å¾ç»„åˆï¼Œç‰¹å¾äº¤å‰ï¼›
>    - ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºã€‚
> 6. ç‰¹å¾ç­›é€‰
>    - è¿‡æ»¤å¼ï¼ˆfilterï¼‰ï¼šå…ˆå¯¹æ•°æ®è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œç„¶ååœ¨è®­ç»ƒå­¦ä¹ å™¨ï¼Œå¸¸è§çš„æ–¹æ³•æœ‰ Relief/æ–¹å·®é€‰æ‹©æ³•/ç›¸å…³ç³»æ•°æ³•/å¡æ–¹æ£€éªŒæ³•/äº’ä¿¡æ¯æ³•ï¼›
>    - åŒ…è£¹å¼ï¼ˆwrapperï¼‰ï¼šç›´æ¥æŠŠæœ€ç»ˆå°†è¦ä½¿ç”¨çš„å­¦ä¹ å™¨çš„æ€§èƒ½ä½œä¸ºç‰¹å¾å­é›†çš„è¯„ä»·å‡†åˆ™ï¼Œå¸¸è§æ–¹æ³•æœ‰ LVMï¼ˆLas Vegas Wrapperï¼‰ ï¼›
>    - åµŒå…¥å¼ï¼ˆembeddingï¼‰ï¼šç»“åˆè¿‡æ»¤å¼å’ŒåŒ…è£¹å¼ï¼Œå­¦ä¹ å™¨è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨è¿›è¡Œäº†ç‰¹å¾é€‰æ‹©ï¼Œå¸¸è§çš„æœ‰ lasso å›å½’ï¼›
> 7. é™ç»´
>    - PCA/ LDA/ ICAï¼›
>    - ç‰¹å¾é€‰æ‹©ä¹Ÿæ˜¯ä¸€ç§é™ç»´ã€‚

### 0.EDAè¿‡ç¨‹æ¦‚è¦

> **1ï¼‰æ•°æ®æ¦‚è§ˆ**
>
> - `pd.describe()` æŸ¥çœ‹æ¯åˆ—çš„ç»Ÿè®¡é‡ï¼Œä¸ªæ•°countã€å¹³å‡å€¼meanã€æ–¹å·®stdã€æœ€å° å€¼minã€ä¸­ä½æ•°25% 50% 75% ã€ä»¥åŠæœ€å¤§å€¼
> - `pd.info()` é€šè¿‡infoæ¥äº†è§£æ•°æ®æ¯åˆ—çš„typeï¼Œæœ‰åŠ©äºäº†è§£æ˜¯å¦å­˜åœ¨é™¤äº†nanä»¥ å¤–çš„ç‰¹æ®Šç¬¦å·å¼‚å¸¸
> 
> **2ï¼‰åˆ¤æ–­ç¼ºå¤±ä¸å¼‚å¸¸**
>
> - ä½¿ç”¨`pd.is_null()` å‡½æ•°æŸ¥çœ‹ç¼ºå¤±
> - ä½¿ç”¨ `pd.value_counts()` æŸ¥çœ‹æ•°æ®æƒ…å†µ
> - å¯è§†åŒ– ``msno.matrix()` `msno.bar()` 
> 
> **3ï¼‰ç»˜åˆ¶æ•°æ®åˆ†å¸ƒ seaborn** ï¼šJohnson SUã€Normalã€Log Normalç­‰ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£é¢„æµ‹å€¼çš„åˆ†å¸ƒ
>
> **4ï¼‰ç»Ÿè®¡æ•°å€¼å˜é‡ç›¸å…³æ€§** ï¼šæ··æ·†çŸ©é˜µ
>
> **5ï¼‰ç»Ÿè®¡ç‰¹å¾çš„ååº¦ä¸å³°åº¦** 
>
> **6ï¼‰ç»˜åˆ¶ç‰¹å¾ä¹‹é—´çš„å…³ç³»å›¾** ï¼šæ•°å­—ç‰¹å¾ç›¸äº’ä¹‹é—´çš„å…³ç³»å¯è§†åŒ–ã€å¤šå˜é‡äº’ç›¸å›å½’å…³ç³»å¯è§†åŒ–
>
> **7ï¼‰ç»˜åˆ¶ç±»åˆ«ç‰¹å¾åˆ†å¸ƒå›¾** ï¼šç®±å½¢å›¾ã€å°æç´å›¾

### 1.å¼‚å¸¸å€¼çš„è¯†åˆ«ä¸åˆ é™¤

> **ç®±çº¿å›¾**
>
> ç®±çº¿å›¾æŠ€æœ¯å®é™…ä¸Šå°±æ˜¯**åˆ©ç”¨æ•°æ®çš„åˆ†ä½æ•°è¯†åˆ«å…¶ä¸­çš„å¼‚å¸¸ç‚¹**ï¼Œè¯¥å›¾å½¢å±äºå…¸å‹çš„ç»Ÿè®¡å›¾å½¢ï¼Œåœ¨å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œéƒ½å¾—åˆ°å¹¿æ³›çš„åº”ç”¨ã€‚
>
> å›¾ä¸­çš„ä¸‹å››åˆ†ä½æ•°æŒ‡çš„æ˜¯æ•°æ®çš„25%åˆ†ä½ç‚¹æ‰€å¯¹åº”çš„å€¼ï¼ˆQ1ï¼‰ï¼›ä¸­ä½æ•°å³ä¸ºæ•°æ®çš„50%åˆ†ä½ç‚¹æ‰€å¯¹åº”çš„å€¼ï¼ˆQ2ï¼‰ï¼›ä¸Šå››åˆ†ä½æ•°åˆ™ä¸ºæ•°æ®çš„75%åˆ†ä½ç‚¹æ‰€å¯¹åº”çš„å€¼ï¼ˆQ3ï¼‰ï¼›ä¸Šé¡»çš„è®¡ç®—å…¬å¼ä¸ºQ3+1.5(Q3-Q1)ï¼›ä¸‹é¡»çš„è®¡ç®—å…¬å¼ä¸ºQ1-1.5(Q3-Q1)ã€‚å…¶ä¸­ï¼ŒQ3-Q1è¡¨ç¤ºå››åˆ†ä½å·®ã€‚å¦‚æœé‡‡ç”¨ç®±çº¿å›¾è¯†åˆ«å¼‚å¸¸å€¼ï¼Œå…¶åˆ¤æ–­æ ‡å‡†æ˜¯ï¼Œå½“å˜é‡çš„æ•°æ®å€¼å¤§äºç®±çº¿å›¾çš„ä¸Šé¡»æˆ–è€…å°äºç®±çº¿å›¾çš„ä¸‹é¡»æ—¶ï¼Œå°±å¯ä»¥è®¤ä¸ºè¿™æ ·çš„æ•°æ®ç‚¹ä¸ºå¼‚å¸¸ç‚¹ï¼ˆæç«¯å¼‚å¸¸ç‚¹ï¼‰ã€‚

![](https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/nLL9Ii.jpg)

![](https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/Br1Nzx.jpg)

```python
def outliers_proc(data, col_name, scale=3):
    """
    ç”¨äºæ¸…æ´—å¼‚å¸¸å€¼ï¼Œé»˜è®¤ç”¨ box_plotï¼ˆscale=3ï¼‰è¿›è¡Œæ¸…æ´—æç«¯å¼‚å¸¸ç‚¹
    :param data: æ¥æ”¶ pandas æ•°æ®æ ¼å¼
    :param col_name: pandas åˆ—å
    :param scale: å°ºåº¦
    :return:
    """

    def box_plot_outliers(data_ser, box_scale):
        """
        åˆ©ç”¨ç®±çº¿å›¾å»é™¤å¼‚å¸¸å€¼
        :param data_ser: æ¥æ”¶ pandas.Series æ•°æ®æ ¼å¼
        :param box_scale: ç®±çº¿å›¾å°ºåº¦ï¼Œ
        :return:
        """
        iqr = box_scale * (data_ser.quantile(0.75) - data_ser.quantile(0.25))
        val_low = data_ser.quantile(0.25) - iqr
        val_up = data_ser.quantile(0.75) + iqr
        rule_low = (data_ser < val_low)
        rule_up = (data_ser > val_up)
        return (rule_low, rule_up), (val_low, val_up)

    data_n = data.copy()
    data_series = data_n[col_name]
    rule, value = box_plot_outliers(data_series, box_scale=scale)
    index = np.arange(data_series.shape[0])[rule[0] | rule[1]]
    print("Delete number is: {}".format(len(index)))
    data_n = data_n.drop(index)
    data_n.reset_index(drop=True, inplace=True)
    print("Now column number is: {}".format(data_n.shape[0]))
    index_low = np.arange(data_series.shape[0])[rule[0]]
    outliers = data_series.iloc[index_low]
    print("Description of data less than the lower bound is:")
    print(pd.Series(outliers).describe())
    index_up = np.arange(data_series.shape[0])[rule[1]]
    outliers = data_series.iloc[index_up]
    print("Description of data larger than the upper bound is:")
    print(pd.Series(outliers).describe())
    
    fig, ax = plt.subplots(1, 2, figsize=(10, 7))
    sns.boxplot(y=data[col_name], data=data, palette="Set1", ax=ax[0])
    sns.boxplot(y=data_n[col_name], data=data_n, palette="Set1", ax=ax[1])
    return data_n
```

> å¯¹æ•°å­—ç‰¹å¾ power è¿›è¡Œå¼‚å¸¸å€¼æ¸…æ´—

<img src="https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/Lxt6S7.png" alt="æ¸…æ´—å‰ vs æ¸…æ´—å" style="zoom:50%;" />

> **3âˆ‚åŸåˆ™**
>
> è¿™ä¸ªåŸåˆ™æœ‰ä¸ªæ¡ä»¶ï¼š**æ•°æ®éœ€è¦æœä»æ­£æ€åˆ†å¸ƒ**ã€‚åœ¨3âˆ‚åŸåˆ™ä¸‹ï¼Œå¼‚å¸¸å€¼å¦‚è¶…è¿‡3å€æ ‡å‡†å·®ï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶è§†ä¸ºå¼‚å¸¸å€¼ã€‚æ­£è´Ÿ3âˆ‚çš„æ¦‚ç‡æ˜¯99.7%ï¼Œé‚£ä¹ˆè·ç¦»å¹³å‡å€¼3âˆ‚ä¹‹å¤–çš„å€¼å‡ºç°çš„æ¦‚ç‡ä¸º$P( \mid x-u \mid > 3âˆ‚) \leq 0.003$ï¼Œå±äºæä¸ªåˆ«çš„å°æ¦‚ç‡äº‹ä»¶ã€‚å¦‚æœæ•°æ®ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œä¹Ÿå¯ä»¥ç”¨è¿œç¦»å¹³å‡å€¼çš„å¤šå°‘å€æ ‡å‡†å·®æ¥æè¿°ã€‚çº¢è‰²ç®­å¤´æ‰€æŒ‡å°±æ˜¯å¼‚å¸¸å€¼ã€‚

<img src="https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/XfX9Ls.jpg"/>

### 2.ç‰¹å¾æ„é€ 

âŒ æˆ‘ä»¬ä»EDAå­¦åˆ°äº†å•¥ï¼ˆå¾…å®Œå–„ï¼‰

> ç°åœ¨æˆ‘ä»¬å·²ç»æ¢ç´¢äº†æ•°æ®ä¸­çš„è¶‹åŠ¿å’Œå…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„æ¨¡å‹è®¾è®¡ä¸€ç»„å‡½æ•°ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨EDAçš„ç»“æœæ¥æ„å»ºç‰¹å¾å·¥ç¨‹ã€‚ ç‰¹åˆ«æ˜¯ï¼Œ**æˆ‘ä»¬ä»EDAå­¦åˆ°äº†ä»¥ä¸‹çŸ¥è¯†ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œç‰¹å¾å·¥ç¨‹/é€‰æ‹©**ï¼š
>
> - åˆ†æ•°åˆ†å¸ƒå› å»ºç­‘ç±»å‹è€Œå¼‚ï¼Œå¹¶ä¸”åœ¨è¾ƒå°ç¨‹åº¦ä¸Šå› è¡Œæ”¿åŒºè€Œå¼‚ã€‚ è™½ç„¶æˆ‘ä»¬å°†å…³æ³¨æ•°å­—ç‰¹å¾ï¼Œä½†æˆ‘ä»¬è¿˜åº”è¯¥åœ¨æ¨¡å‹ä¸­åŒ…å«è¿™ä¸¤ä¸ªåˆ†ç±»ç‰¹å¾ã€‚
> - å¯¹ç‰¹å¾è¿›è¡Œå¯¹æ•°å˜æ¢ä¸ä¼šå¯¼è‡´ç‰¹å¾ä¸åˆ†æ•°ä¹‹é—´çš„çº¿æ€§ç›¸å…³æ€§æ˜¾ç€å¢åŠ 

| æ•°æ®ä½¿ç”¨                      | **Field**         | **Description**                                              | æ•°æ®æƒ…å†µ                                                     |
| :---------------------------- | :---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
|                               | SaleID            | äº¤æ˜“IDï¼Œå”¯ä¸€ç¼–ç                                              | å”¯ä¸€ç¼–ç                                                      |
|                               | name              | æ±½è½¦äº¤æ˜“åç§°ï¼Œå·²è„±æ•                                         | ã€æ— æœ‰æ•ˆä¿¡æ¯ã€‘                                               |
| åˆå¹¶ç‰¹å¾ï¼Œæ„å»ºæ–°ç‰¹å¾used_time | ~~regDate~~       | æ±½è½¦æ³¨å†Œæ—¥æœŸï¼Œä¾‹å¦‚20160101ï¼Œ2016å¹´01æœˆ01æ—¥                   | æœ€æ—©æ³¨å†Œæ—¥æœŸ19910001ã€æœ€æ™š20151212                           |
|                               | model             | è½¦å‹ç¼–ç ï¼Œå·²è„±æ•                                             | [0-247] ç§è½¦å‹ã€æœ‰ç¼ºå¤±å€¼ã€‘                                   |
| è®¡ç®—ç»Ÿè®¡é‡                    | brand             | æ±½è½¦å“ç‰Œï¼Œå·²è„±æ•                                             | [0-39] ç§å“ç‰Œ                                                |
|                               | bodyType          | è½¦èº«ç±»å‹ï¼šè±ªåè½¿è½¦ï¼š0ï¼Œå¾®å‹è½¦ï¼š1ï¼Œå¢å‹è½¦ï¼š2ï¼Œå¤§å·´è½¦ï¼š3ï¼Œæ•ç¯·è½¦ï¼š4ï¼ŒåŒé—¨æ±½è½¦ï¼š5ï¼Œå•†åŠ¡è½¦ï¼š6ï¼Œæ…æ‹Œè½¦ï¼š7 | [0-7] ç§è½¦èº«ç±»å‹ã€æœ‰ç¼ºå¤±å€¼ã€‘                                 |
|                               | fuelType          | ç‡ƒæ²¹ç±»å‹ï¼šæ±½æ²¹ï¼š0ï¼ŒæŸ´æ²¹ï¼š1ï¼Œæ¶²åŒ–çŸ³æ²¹æ°”ï¼š2ï¼Œå¤©ç„¶æ°”ï¼š3ï¼Œæ··åˆåŠ¨åŠ›ï¼š4ï¼Œå…¶ä»–ï¼š5ï¼Œç”µåŠ¨ï¼š6 | [0-6] ç§ç‡ƒæ²¹ç±»å‹ã€æœ‰ç¼ºå¤±å€¼ã€‘                                 |
|                               | gearbox           | å˜é€Ÿç®±ï¼šæ‰‹åŠ¨ï¼š0ï¼Œè‡ªåŠ¨ï¼š1                                     | [0-1] ç§å˜é€Ÿç®±ã€æœ‰ç¼ºå¤±å€¼ã€‘                                   |
| æ•°æ®åˆ†æ¡¶                      | power             | å‘åŠ¨æœºåŠŸç‡ï¼šèŒƒå›´ [ 0, 600 ]                                  | maxå€¼19312ã€è¯¥å­—æ®µå­˜åœ¨å¼‚å¸¸å€¼ã€‘                               |
|                               | kilometer         | æ±½è½¦å·²è¡Œé©¶å…¬é‡Œï¼Œå•ä½ä¸‡km                                     | [0-15] ä¸‡è¡Œé©¶é‡Œç¨‹                                            |
|                               | notRepairedDamage | æ±½è½¦æœ‰å°šæœªä¿®å¤çš„æŸåï¼šæ˜¯ï¼š0ï¼Œå¦ï¼š1                           | [0-1] æ˜¯å¦æŸå                                               |
| æå–ç‰¹å¾[:-3]                 | ~~regionCode~~    | åœ°åŒºç¼–ç ï¼Œå·²è„±æ•                                             |                                                              |
| æ— æ•ˆç‰¹å¾                      | ~~seller~~        | ~~é”€å”®æ–¹ï¼šä¸ªä½“ï¼š0ï¼Œéä¸ªä½“ï¼š1~~                               | ~~[0-1] ç§é”€å”®ã€æ— æœ‰æ•ˆä¿¡æ¯ã€‘ã€æ•°æ®å€¾æ–œã€‘~~                   |
| æ— æ•ˆç‰¹å¾                      | ~~offerType~~     | ~~æŠ¥ä»·ç±»å‹ï¼šæä¾›ï¼š0ï¼Œè¯·æ±‚ï¼š1~~                               | ~~æœ€å¤§å€¼ä¸º0ã€æ— æœ‰æ•ˆä¿¡æ¯ã€‘ã€æ•°æ®å€¾æ–œã€‘~~                      |
| åˆå¹¶ç‰¹å¾ï¼Œæ„å»ºæ–°ç‰¹å¾used_time | ~~creatDate~~     | æ±½è½¦ä¸Šçº¿æ—¶é—´ï¼Œå³å¼€å§‹å”®å–æ—¶é—´                                 | æœ€æ—©å”®å–æ—¥æœŸ20150618ã€æœ€æ™š20160407                           |
| è®¡ç®—ç»Ÿè®¡é‡                    | price             | äºŒæ‰‹è½¦äº¤æ˜“ä»·æ ¼ï¼ˆé¢„æµ‹ç›®æ ‡ï¼‰                                   | æœ€å¤§å€¼99999ï¼Œä¸75%ä¸­ä½æ•°7700å·®è·è¾ƒå¤§ã€è¯¥å­—æ®µå­˜åœ¨å¼‚å¸¸å€¼ã€‘     |
|                               | vç³»åˆ—ç‰¹å¾         | åŒ¿åç‰¹å¾ï¼ŒåŒ…å«v0-14åœ¨å†…15ä¸ªåŒ¿åç‰¹å¾                          | v_2,v_3,v_4,v_10,v_11,v_12,v_13,v_14ã€æœ€å¤§å€¼ä¸75%ä¸­ä½æ•°å’Œå‡å€¼å·®è·è¾ƒå¤§ã€‘ |

> **1ï¼‰åˆå¹¶ç‰¹å¾ï¼š**
>
> ä½¿ç”¨æ—¶é—´ï¼šdata['creatDate'] - data['regDate']ï¼Œååº”æ±½è½¦ä½¿ç”¨æ—¶é—´ï¼Œä¸€èˆ¬æ¥è¯´ä»·æ ¼ä¸ä½¿ç”¨æ—¶é—´æˆåæ¯”
>
> > çœ‹ä¸€ä¸‹ç©ºæ•°æ®ï¼Œæœ‰ 15k ä¸ªæ ·æœ¬çš„æ—¶é—´æ˜¯æœ‰é—®é¢˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åˆ é™¤ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ”¾ç€ã€‚
> > ä½†æ˜¯è¿™é‡Œä¸å»ºè®®åˆ é™¤ï¼Œå› ä¸º**åˆ é™¤ç¼ºå¤±æ•°æ®å æ€»æ ·æœ¬é‡è¿‡å¤§**ï¼Œ7.5%ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ”¾ç€ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬ XGBoost ä¹‹ç±»çš„å†³ç­–æ ‘ï¼Œå…¶æœ¬èº«å°±èƒ½å¤„ç†ç¼ºå¤±å€¼ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ç®¡ï¼›
>
> **2ï¼‰æå–ç‰¹å¾ï¼š**
>
> ä»é‚®ç¼–ä¸­æå–åŸå¸‚ä¿¡æ¯ï¼Œç›¸å½“äºåŠ å…¥äº†å…ˆéªŒçŸ¥è¯†
>
> **3ï¼‰è®¡ç®—æŸä¸€ç‰¹å¾çš„ç»Ÿè®¡é‡ä¿¡æ¯**
>
> ä»æ±½è½¦å“ç‰Œä¸äºŒæ‰‹è½¦äº¤æ˜“ä»·æ ¼è®¡ç®—æŸå“ç‰Œçš„ï¼ˆé”€å”®ï¼Œä»·æ ¼ï¼‰ç»Ÿè®¡é‡
>
> âš ï¸ äºŒæ‰‹è½¦äº¤æ˜“ä»·æ ¼ä¸ºæµ‹è¯•é›†ç‹¬æœ‰ï¼Œè¿™é‡Œçš„æ€è·¯ä¸ºå°†æµ‹è¯•é›†å…³äºï¼ˆé”€å”®ï¼Œä»·æ ¼ï¼‰ç»Ÿè®¡é‡ç‰¹å¾é€šè¿‡`pd.merge(brand_fe, how='left', on='brand')`çš„æ–¹å¼è¿ç”¨åˆ°è®­ç»ƒé›†ä¸Šã€è¿™é‡Œå­˜ç–‘â“ã€‘
>
> **4ï¼‰æ•°æ®åˆ†æ¡¶**
> ```python
> bin = [i*10 for i in range(31)]
> data['power_bin'] = pd.cut(data['power'], bin, labels=False)
> ```
> ä»¥ power ä¸ºä¾‹ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„ç¼ºå¤±å€¼ä¹Ÿè¿›æ¡¶äº†ï¼Œä¸ºä»€ä¹ˆè¦åšæ•°æ®åˆ†æ¡¶å‘¢ï¼ŒåŸå› æœ‰å¾ˆå¤šï¼Œ= =
> 1. ç¦»æ•£åç¨€ç–å‘é‡å†…ç§¯ä¹˜æ³•è¿ç®—é€Ÿåº¦æ›´å¿«ï¼Œè®¡ç®—ç»“æœä¹Ÿæ–¹ä¾¿å­˜å‚¨ï¼Œå®¹æ˜“æ‰©å±•ï¼›
> 2. ç¦»æ•£åçš„ç‰¹å¾å¯¹å¼‚å¸¸å€¼æ›´å…·é²æ£’æ€§ï¼Œå¦‚ age>30 ä¸º 1 å¦åˆ™ä¸º 0ï¼Œå¯¹äºå¹´é¾„ä¸º 200 çš„ä¹Ÿä¸ä¼šå¯¹æ¨¡å‹é€ æˆå¾ˆå¤§çš„å¹²æ‰°ï¼›
> 3. LR å±äºå¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼Œè¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œç»è¿‡ç¦»æ•£åŒ–åï¼Œæ¯ä¸ªå˜é‡æœ‰å•ç‹¬çš„æƒé‡ï¼Œè¿™ç›¸å½“äºå¼•å…¥äº†éçº¿æ€§ï¼Œèƒ½å¤Ÿæå‡æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ï¼ŒåŠ å¤§æ‹Ÿåˆï¼›
> 4. ç¦»æ•£åç‰¹å¾å¯ä»¥è¿›è¡Œç‰¹å¾äº¤å‰ï¼Œæå‡è¡¨è¾¾èƒ½åŠ›ï¼Œç”± M+N ä¸ªå˜é‡ç¼–ç¨‹ M*N ä¸ªå˜é‡ï¼Œè¿›ä¸€æ­¥å¼•å…¥éçº¿å½¢ï¼Œæå‡äº†è¡¨è¾¾èƒ½åŠ›ï¼›
> 5. ç‰¹å¾ç¦»æ•£åæ¨¡å‹æ›´ç¨³å®šï¼Œå¦‚ç”¨æˆ·å¹´é¾„åŒºé—´ï¼Œä¸ä¼šå› ä¸ºç”¨æˆ·å¹´é¾„é•¿äº†ä¸€å²å°±å˜åŒ–
>
> **5ï¼‰å½’ä¸€åŒ–**
>
> ```python
> def max_min(x):
>     return (x - np.min(x)) / (np.max(x) - np.min(x))
> ```
>
> **6ï¼‰å¯¹ç±»åˆ«ç‰¹å¾è¿›è¡Œ OneEncoder**
>
> `pd.get_dummies(data, columns=['model', 'brand', 'bodyType', 'fuelType','gearbox', 'notRepairedDamage', 'power_bin'])`
>
> 7ï¼‰ç¡®ä¿æ‰€æœ‰çš„ç‰¹å¾éƒ½æ˜¯æ•°å­—ç‰¹å¾ï¼ˆç±»åˆ«ç‰¹å¾ã€æ•°å­—ç‰¹å¾ã€objectï¼‰
>
> `pd.select_dtypes(include="object").columns`


### ç‰¹å¾ç­›é€‰

- #### åŒ…è£¹å¼ï¼šç”¨ SequentialFeatureSelector

```python
# k_feature å¤ªå¤§ä¼šå¾ˆéš¾è·‘ï¼Œæ²¡æœåŠ¡å™¨ï¼Œæ‰€ä»¥æå‰ interrupt äº†
from mlxtend.feature_selection import SequentialFeatureSelector as SFS
from sklearn.linear_model import LinearRegression
sfs = SFS(LinearRegression(),
           k_features=10,
           forward=True,
           floating=False,
           scoring = 'r2',
           cv = 0)
data = data[data["train"]==1]
x = data.drop(['price'], axis=1)
x = x.fillna(0)
y = data['price']
sfs.fit(x, y)
sfs.k_feature_names_ 
>>> ('kilometer',
     'v_0',
     'v_3',
     'v_7',
     'used_time',
     'brand_price_std',
     'brand_price_average',
     'model_167.0',
     'brand_24',
     'gearbox_1.0')
```

```python
# æŸ¥çœ‹è¾¹é™…æ•ˆç›Š
from mlxtend.plotting import plot_sequential_feature_selection as plot_sfs
import matplotlib.pyplot as plt
fig1 = plot_sfs(sfs.get_metric_dict(), kind='std_dev')
plt.grid()
plt.show()
```

<img src="https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/F0F7q1.png" style="zoom:50%;" />

### ç»éªŒæ€»ç»“

> ç‰¹å¾å·¥ç¨‹æ˜¯æ¯”èµ›ä¸­æœ€è‡³å…³é‡è¦çš„çš„ä¸€å—ï¼Œç‰¹åˆ«çš„ä¼ ç»Ÿçš„æ¯”èµ›ï¼Œå¤§å®¶çš„æ¨¡å‹å¯èƒ½éƒ½å·®ä¸å¤šï¼Œè°ƒå‚å¸¦æ¥çš„æ•ˆæœå¢å¹…æ˜¯éå¸¸æœ‰é™çš„ï¼Œä½†**ç‰¹å¾å·¥ç¨‹çš„å¥½åå¾€å¾€ä¼šå†³å®šäº†æœ€ç»ˆçš„æ’åå’Œæˆç»©**ã€‚
>
> **ç‰¹å¾å·¥ç¨‹çš„ä¸»è¦ç›®çš„è¿˜æ˜¯åœ¨äºå°†æ•°æ®è½¬æ¢ä¸ºèƒ½æ›´å¥½åœ°è¡¨ç¤ºæ½œåœ¨é—®é¢˜çš„ç‰¹å¾**ï¼Œä»è€Œæé«˜æœºå™¨å­¦ä¹ çš„æ€§èƒ½ã€‚æ¯”å¦‚ï¼Œå¼‚å¸¸å€¼å¤„ç†æ˜¯ä¸ºäº†å»é™¤å™ªå£°ï¼Œå¡«è¡¥ç¼ºå¤±å€¼å¯ä»¥åŠ å…¥å…ˆéªŒçŸ¥è¯†ç­‰ã€‚
>
> **ç‰¹å¾æ„é€ **ä¹Ÿå±äºç‰¹å¾å·¥ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ç›®çš„æ˜¯**ä¸ºäº†å¢å¼ºæ•°æ®çš„è¡¨è¾¾**ã€‚
>
> æœ‰äº›æ¯”èµ›çš„ç‰¹å¾æ˜¯**åŒ¿åç‰¹å¾**ï¼Œè¿™å¯¼è‡´æˆ‘ä»¬å¹¶ä¸æ¸…æ¥šç‰¹å¾ç›¸äº’ç›´æ¥çš„å…³è”æ€§ï¼Œè¿™æ—¶æˆ‘ä»¬å°±åªæœ‰å•çº¯åŸºäºç‰¹å¾è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚**è£…ç®±ï¼Œgroupbyï¼Œagg** ç­‰è¿™æ ·ä¸€äº›æ“ä½œè¿›è¡Œä¸€äº›ç‰¹å¾ç»Ÿè®¡ï¼Œæ­¤å¤–è¿˜å¯ä»¥å¯¹ç‰¹å¾è¿›è¡Œè¿›ä¸€æ­¥çš„ **logï¼Œexp ç­‰å˜æ¢**ï¼Œæˆ–è€…å¯¹å¤šä¸ªç‰¹å¾è¿›è¡Œå››åˆ™è¿ç®—ï¼ˆå¦‚ä¸Šé¢æˆ‘ä»¬ç®—å‡ºçš„ä½¿ç”¨æ—¶é•¿ï¼‰ï¼Œå¤šé¡¹å¼ç»„åˆç­‰ç„¶åè¿›è¡Œç­›é€‰ã€‚ç”±äºç‰¹æ€§çš„åŒ¿åæ€§å…¶å®é™åˆ¶äº†å¾ˆå¤šå¯¹äºç‰¹å¾çš„å¤„ç†ï¼Œå½“ç„¶æœ‰äº›æ—¶å€™ç”¨ NN å»æå–ä¸€äº›ç‰¹å¾ä¹Ÿä¼šè¾¾åˆ°æ„æƒ³ä¸åˆ°çš„è‰¯å¥½æ•ˆæœã€‚
>
> å¯¹äº**çŸ¥é“ç‰¹å¾å«ä¹‰ï¼ˆéåŒ¿åï¼‰çš„ç‰¹å¾å·¥ç¨‹**ï¼Œç‰¹åˆ«æ˜¯åœ¨å·¥ä¸šç±»å‹æ¯”èµ›ä¸­ï¼Œä¼šåŸºäºä¿¡å·å¤„ç†ï¼Œé¢‘åŸŸæå–ï¼Œä¸°åº¦ï¼Œååº¦ç­‰æ„å»ºæ›´ä¸ºæœ‰å®é™…æ„ä¹‰çš„ç‰¹å¾ï¼Œè¿™å°±æ˜¯**ç»“åˆèƒŒæ™¯çš„ç‰¹å¾æ„**å»ºï¼Œåœ¨æ¨èç³»ç»Ÿä¸­ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œå„ç§ç±»å‹ç‚¹å‡»ç‡ç»Ÿè®¡ï¼Œå„æ—¶æ®µç»Ÿè®¡ï¼ŒåŠ ç”¨æˆ·å±æ€§çš„ç»Ÿè®¡ç­‰ç­‰ï¼Œè¿™æ ·ä¸€ç§ç‰¹å¾æ„å»ºå¾€å¾€è¦æ·±å…¥åˆ†æèƒŒåçš„ä¸šåŠ¡é€»è¾‘æˆ–è€…è¯´ç‰©ç†åŸç†ï¼Œä»è€Œæ‰èƒ½æ›´å¥½çš„æ‰¾åˆ° magicã€‚
>
> å½“ç„¶ç‰¹å¾å·¥ç¨‹å…¶å®æ˜¯å’Œæ¨¡å‹ç»“åˆåœ¨ä¸€èµ·çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä¸º LR NN åšåˆ†æ¡¶å’Œç‰¹å¾å½’ä¸€åŒ–çš„åŸå› ï¼Œè€Œå¯¹äºç‰¹å¾çš„å¤„ç†æ•ˆæœå’Œç‰¹å¾é‡è¦æ€§ç­‰å¾€å¾€è¦é€šè¿‡æ¨¡å‹æ¥éªŒè¯ã€‚
>
> æ€»çš„æ¥è¯´ï¼Œç‰¹å¾å·¥ç¨‹æ˜¯ä¸€ä¸ªå…¥é—¨ç®€å•ï¼Œä½†æƒ³ç²¾é€šéå¸¸éš¾çš„ä¸€ä»¶äº‹ã€‚

